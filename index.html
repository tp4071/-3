<!doctype html>
<html lang="vi" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>B√ç M·∫¨T N√à</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
    }

    .app-container {
      width: 100%;
      height: 100%;
      overflow: auto;
      /* Gi·ªØ n·ªÅn t·ªëi ƒë·ªÉ l√†m n·ªïi b·∫≠t tr√°i tim ƒë·ªè */
      background: linear-gradient(135deg, #2b1055 0%, #7597de 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
      position: relative;
    }

    .heart-container {
      position: relative;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-20px);
      }
    }

    .heart {
      width: 200px;
      height: 200px;
      position: relative;
      transform: rotate(-45deg);
      /* TƒÉng t·ªëc ƒë·ªô ƒë·∫≠p m·ªôt ch√∫t cho sinh ƒë·ªông h∆°n */
      animation: heartbeat 1.2s ease-in-out infinite;
    }

    @keyframes heartbeat {
      0% {
        transform: rotate(-45deg) scale(1);
      }
      14% {
        transform: rotate(-45deg) scale(1.3);
      }
      28% {
        transform: rotate(-45deg) scale(1);
      }
      42% {
        transform: rotate(-45deg) scale(1.3);
      }
      70% {
        transform: rotate(-45deg) scale(1);
      }
    }

    .heart::before,
    .heart::after {
      content: '';
      width: 100px;
      height: 160px;
      position: absolute;
      border-radius: 100px 100px 0 0;
      /* M√†u m·∫∑c ƒë·ªãnh ban ƒë·∫ßu (s·∫Ω b·ªã JS ghi ƒë√®, nh∆∞ng ƒë·ªÉ ƒë√¢y cho ch·∫Øc ch·∫Øn) */
      background: linear-gradient(45deg, #ff0033 0%, #ff66b2 100%);
      box-shadow: 0 10px 40px rgba(255, 0, 51, 0.5);
    }

    .heart::before {
      left: 100px;
    }

    .heart::after {
      top: -60px;
      left: 40px;
      transform: rotate(90deg);
    }

    .heart-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(45deg);
      font-size: 48px;
      font-weight: bold;
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      z-index: 10;
      letter-spacing: 2px;
      animation: glow 2s ease-in-out infinite;
    }

    @keyframes glow {
      0%, 100% {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3), 0 0 10px rgba(255, 255, 255, 0.5);
      }
      50% {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 0, 51, 0.6);
      }
    }

    .sparkle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      animation: sparkle-animation 2s ease-in-out infinite;
      opacity: 0;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }

    @keyframes sparkle-animation {
      0%, 100% {
        opacity: 0;
        transform: scale(0) rotate(0deg);
      }
      50% {
        opacity: 1;
        transform: scale(1.5) rotate(180deg);
      }
    }

    .sparkle:nth-child(1) { top: 10%; left: 20%; animation-delay: 0s; }
    .sparkle:nth-child(2) { top: 20%; left: 80%; animation-delay: 0.3s; }
    .sparkle:nth-child(3) { top: 70%; left: 15%; animation-delay: 0.6s; }
    .sparkle:nth-child(4) { top: 80%; left: 85%; animation-delay: 0.9s; }
    .sparkle:nth-child(5) { top: 40%; left: 10%; animation-delay: 1.2s; }
    .sparkle:nth-child(6) { top: 50%; left: 90%; animation-delay: 1.5s; }
    .sparkle:nth-child(7) { top: 30%; left: 50%; animation-delay: 1.8s; }
    .sparkle:nth-child(8) { top: 60%; left: 50%; animation-delay: 2.1s; }

    .message {
      margin-top: 60px;
      font-size: 28px;
      color: white;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      animation: fade-in 2s ease-in;
      padding: 0 20px;
    }

    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .floating-hearts {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      pointer-events: none;
    }

    .mini-heart {
      position: absolute;
      font-size: 20px;
      color: rgba(255, 255, 255, 0.7);
      animation: float-up 5s linear infinite;
      opacity: 0;
    }

    @keyframes float-up {
      0% {
        opacity: 0;
        transform: translateY(0) rotate(0deg);
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translateY(-100%) rotate(360deg);
      }
    }

    .mini-heart:nth-child(1) { left: 10%; animation-delay: 0s; }
    .mini-heart:nth-child(2) { left: 20%; animation-delay: 1s; }
    .mini-heart:nth-child(3) { left: 30%; animation-delay: 2s; }
    .mini-heart:nth-child(4) { left: 40%; animation-delay: 3s; }
    .mini-heart:nth-child(5) { left: 50%; animation-delay: 4s; }
    .mini-heart:nth-child(6) { left: 60%; animation-delay: 0.5s; }
    .mini-heart:nth-child(7) { left: 70%; animation-delay: 1.5s; }
    .mini-heart:nth-child(8) { left: 80%; animation-delay: 2.5s; }
    .mini-heart:nth-child(9) { left: 90%; animation-delay: 3.5s; }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <main class="app-container">
   <div class="floating-hearts">
    <div class="mini-heart">‚ù§Ô∏è</div>
    <div class="mini-heart">üíï</div>
    <div class="mini-heart">üåπ</div>
    <div class="mini-heart">üíì</div>
    <div class="mini-heart">‚ù§Ô∏è</div>
    <div class="mini-heart">üíñ</div>
    <div class="mini-heart">üåπ</div>
    <div class="mini-heart">üíì</div>
    <div class="mini-heart">üíï</div>
   </div>
   <div class="heart-container">
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="heart">
     <div class="heart-text" id="heartText">
      LINH
     </div>
    </div>
   </div>
   <div class="message" id="messageText">
    üíù Y√™u v√† th∆∞∆°ng üíù
   </div>
  </main>
  <script>
    const defaultConfig = {
      heart_text: 'LINH',
      message_text: 'üíù Y√™u v√† th∆∞∆°ng üíù',
      // CH·ªàNH S·ª¨A M√ÄU S·∫ÆC ·ªû ƒê√ÇY:
      // M√†u b·∫Øt ƒë·∫ßu: ƒê·ªè ƒë·∫≠m
      heart_color_start: '#ff0033', 
      // M√†u k·∫øt th√∫c: H·ªìng t∆∞∆°i
      heart_color_end: '#ff66b2',   
      
      background_color_start: '#2b1055',
      background_color_end: '#7597de',
      text_color: '#ffffff'
    };

    async function onConfigChange(config) {
      const heartText = config.heart_text || defaultConfig.heart_text;
      const messageText = config.message_text || defaultConfig.message_text;
      const heartColorStart = config.heart_color_start || defaultConfig.heart_color_start;
      const heartColorEnd = config.heart_color_end || defaultConfig.heart_color_end;
      const bgColorStart = config.background_color_start || defaultConfig.background_color_start;
      const bgColorEnd = config.background_color_end || defaultConfig.background_color_end;
      const textColor = config.text_color || defaultConfig.text_color;

      document.getElementById('heartText').textContent = heartText;
      document.getElementById('messageText').textContent = messageText;

      const heart = document.querySelector('.heart');
      // Update logic for JS shadow
      const beforeStyle = `
        background: linear-gradient(45deg, ${heartColorStart} 0%, ${heartColorEnd} 100%);
        box-shadow: 0 10px 40px ${heartColorStart}80;
      `;
      heart.style.setProperty('--heart-gradient', beforeStyle);

      const styleSheet = document.styleSheets[0];
      // X√≥a rules c≈© ƒë·ªÉ tr√°nh tr√πng l·∫∑p
      for (let i = styleSheet.cssRules.length - 1; i >= 0; i--) {
        if (styleSheet.cssRules[i].selectorText === '.heart::before' || 
            styleSheet.cssRules[i].selectorText === '.heart::after') {
          styleSheet.deleteRule(i);
        }
      }
      
      // Ch√®n m√†u m·ªõi
      styleSheet.insertRule(`.heart::before, .heart::after { 
        background: linear-gradient(45deg, ${heartColorStart} 0%, ${heartColorEnd} 100%); 
        box-shadow: 0 10px 40px ${heartColorStart}80;
      }`, styleSheet.cssRules.length);

      document.querySelector('.app-container').style.background = 
        `linear-gradient(135deg, ${bgColorStart} 0%, ${bgColorEnd} 100%)`;

      document.getElementById('heartText').style.color = textColor;
      document.getElementById('messageText').style.color = textColor;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color_start || defaultConfig.background_color_start,
            set: (value) => {
              config.background_color_start = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color_start: value });
              }
            }
          },
          {
            get: () => config.background_color_end || defaultConfig.background_color_end,
            set: (value) => {
              config.background_color_end = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color_end: value });
              }
            }
          },
          {
            get: () => config.heart_color_start || defaultConfig.heart_color_start,
            set: (value) => {
              config.heart_color_start = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ heart_color_start: value });
              }
            }
          },
          {
            get: () => config.heart_color_end || defaultConfig.heart_color_end,
            set: (value) => {
              config.heart_color_end = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ heart_color_end: value });
              }
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['heart_text', config.heart_text || defaultConfig.heart_text],
        ['message_text', config.message_text || defaultConfig.message_text]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 </body>
</html>